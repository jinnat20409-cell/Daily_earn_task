<!-- পার্ট ওয়ান শুরু -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TapCash Mini App</title>
<style>
  body { margin:0; padding:0; font-family:sans-serif; background:#fff; color:#000; }
  .screen { display:none; padding:20px; height:calc(100vh - 60px); box-sizing:border-box; }
  .screen.active { display:block; }
  .bottom-nav { position:fixed; bottom:0; left:0; width:100%; height:60px; display:flex; border-top:1px solid #ccc; background:#f9f9f9; }
  .bottom-nav button { flex:1; border:none; background:#eee; font-size:16px; cursor:pointer; }
  .bottom-nav button.active { background:#ddd; }
  .profile-img { width:50px; height:50px; border-radius:50%; margin-right:10px; }
  .user-info { display:flex; align-items:center; margin-bottom:20px; }
  .btn { padding:10px 20px; margin:5px 0; display:block; width:100%; font-size:16px; cursor:pointer; }
  .card { padding:15px; border:1px solid #ccc; margin-bottom:10px; border-radius:8px; }
</style>
</head>
<body>

<!-- Home Screen -->
<div id="homeScreen" class="screen active">
  <div class="user-info">
    <img id="profilePic" class="profile-img" src="" alt="Profile">
    <div>
      <div id="userName">User Name</div>
      <div id="welcomeText">Welcome!</div>
    </div>
  </div>
  <div class="card">
    <p>Income: <span id="income">0</span> ৳</p>
    <p>Ads Watched: <span id="adsWatched">0</span></p>
    <p>Referrals: <span id="referrals">0</span></p>
  </div>
</div>

<!-- Earn Screen -->
<div id="earnScreen" class="screen">
  <div class="card">
    <p>Earn Rewards</p>
    <p>Today's Limit: <span id="dailyLimit">5</span> ads</p>
    <p>Ads Watched Today: <span id="adsToday">0</span></p>
    <p>Per Ad Reward: 1 ৳</p>
    <button id="watchAdBtn" class="btn">Watch Ad</button>
  </div>
  <div class="card">
    <p>Join on Telegram:</p>
    <button class="btn" onclick="joinTelegram('channel1')">Join Channel 1</button>
    <button class="btn" onclick="joinTelegram('channel2')">Join Channel 2</button>
    <button class="btn" onclick="joinTelegram('channel3')">Join Channel 3</button>
  </div>
  <div id="monetagSpot">
    <!-- Monetag Script -->
    <script src='//libtl.com/sdk.js' data-zone='9717419' data-sdk='show_9717419'></script>
  </div>
</div>

<script>
// CONFIGURATION
const CONFIG = {
  BOT_TOKEN: '7567052001:AAHrSf6mQPzIsI-_h-zHbYPPaoxO1OMZSH0',
  ADMIN_CHAT_ID: '6750565670',
  BOT_USERNAME: 'MonetagMiniBot_bot',
  MONETAG_SDK_FUNC: 'show_9717419',
  DAILY_AD_LIMIT: 5,
  AD_REWARD: 1
};

// LOCAL STORAGE INIT
if(!localStorage.getItem('income')) localStorage.setItem('income', '0');
if(!localStorage.getItem('adsWatched')) localStorage.setItem('adsWatched', '0');
if(!localStorage.getItem('referrals')) localStorage.setItem('referrals', '0');
if(!localStorage.getItem('adsToday')) localStorage.setItem('adsToday', '0');

// DOM ELEMENTS
const homeScreen = document.getElementById('homeScreen');
const earnScreen = document.getElementById('earnScreen');
const profilePic = document.getElementById('profilePic');
const userName = document.getElementById('userName');
const incomeEl = document.getElementById('income');
const adsWatchedEl = document.getElementById('adsWatched');
const referralsEl = document.getElementById('referrals');
const adsTodayEl = document.getElementById('adsToday');
const watchAdBtn = document.getElementById('watchAdBtn');

// USER INFO MOCK (Telegram WebApp)
let user = {
  id: 123456,
  username: 'username_here',
  first_name: 'First',
  last_name: 'Last',
  profile_photo: ''
};

// SET USER INFO
profilePic.src = user.profile_photo || 'https://via.placeholder.com/50';
userName.innerText = user.first_name + ' ' + (user.last_name || '');

// UPDATE FUNCTION
function updateStats() {
  incomeEl.innerText = localStorage.getItem('income');
  adsWatchedEl.innerText = localStorage.getItem('adsWatched');
  referralsEl.innerText = localStorage.getItem('referrals');
  adsTodayEl.innerText = localStorage.getItem('adsToday');
}

updateStats();

// WATCH AD FUNCTION
watchAdBtn.onclick = function() {
  let adsToday = parseInt(localStorage.getItem('adsToday'));
  if(adsToday >= CONFIG.DAILY_AD_LIMIT) {
    alert('Daily limit reached!');
    return;
  }
  watchAdBtn.disabled = true;
  watchAdBtn.innerText = 'Watching... 15s';
  let seconds = 15;
  let interval = setInterval(()=>{
    seconds--;
    watchAdBtn.innerText = `Watching... ${seconds}s`;
    if(seconds<=0){
      clearInterval(interval);
      watchAdBtn.disabled = false;
      watchAdBtn.innerText = 'Watch Ad';
      // Reward user
      let income = parseInt(localStorage.getItem('income')) + CONFIG.AD_REWARD;
      localStorage.setItem('income', income);
      localStorage.setItem('adsWatched', parseInt(localStorage.getItem('adsWatched'))+1);
      localStorage.setItem('adsToday', adsToday+1);
      updateStats();
      // Call Monetag SDK
      if(window[CONFIG.MONETAG_SDK_FUNC]) window[CONFIG.MONETAG_SDK_FUNC]();
    }
  },1000);
}

// JOIN TELEGRAM (mock)
function joinTelegram(channel){
  alert(`Joined ${channel}, reward credited!`);
}
</script>

<div class="bottom-nav">
  <button id="navHome" class="active">Home</button>
  <button id="navEarn">Earn</button>
  <button id="navWithdraw">Withdraw</button>
  <button id="navProfile">Profile</button>
</div>

<script>
// BOTTOM NAV
const navHome = document.getElementById('navHome');
const navEarn = document.getElementById('navEarn');
const navWithdraw = document.getElementById('navWithdraw');
const navProfile = document.getElementById('navProfile');
const screens = [homeScreen, earnScreen]; // Withdraw & Profile added in Part 2

function switchScreen(screen){
  screens.forEach(s=>s.classList.remove('active'));
  screen.classList.add('active');
  document.querySelectorAll('.bottom-nav button').forEach(b=>b.classList.remove('active'));
}

navHome.onclick = ()=>switchScreen(homeScreen);
navEarn.onclick = ()=>switchScreen(earnScreen);
</script>

<!-- পার্ট ওয়ান শেষ -->
  <!-- পার্ট টু শুরু -->
<!-- Withdraw Screen -->
<div id="withdrawScreen" class="screen">
  <div class="card">
    <p>Balance: <span id="withdrawBalance">0</span> ৳</p>
    <p>Choose Payment Method:</p>
    <button class="btn" onclick="withdrawRequest('method1')">Method 1</button>
    <button class="btn" onclick="withdrawRequest('method2')">Method 2</button>
  </div>
</div>

<!-- Profile Screen -->
<div id="profileScreen" class="screen">
  <div class="user-info">
    <img id="profilePicProfile" class="profile-img" src="" alt="Profile">
    <div>
      <div id="userNameProfile">User Name</div>
    </div>
  </div>
  <div class="card">
    <p>Balance: <span id="profileBalance">0</span> ৳</p>
    <p>Ads Watched: <span id="profileAds">0</span></p>
    <p>Referrals: <span id="profileReferrals">0</span></p>
    <p>Referral Link:</p>
    <button class="btn" onclick="copyReferral()">Copy Link</button>
  </div>
</div>

<script>
// SCREENS UPDATE
const withdrawScreen = document.getElementById('withdrawScreen');
const profileScreen = document.getElementById('profileScreen');
screens.push(withdrawScreen, profileScreen);

// NAV UPDATE
navWithdraw.onclick = ()=>switchScreen(withdrawScreen);
navProfile.onclick = ()=>switchScreen(profileScreen);

// PROFILE UPDATE
document.getElementById('profilePicProfile').src = profilePic.src;
document.getElementById('userNameProfile').innerText = user.first_name + ' ' + (user.last_name || '');
document.getElementById('profileBalance').innerText = localStorage.getItem('income');
document.getElementById('profileAds').innerText = localStorage.getItem('adsWatched');
document.getElementById('profileReferrals').innerText = localStorage.getItem('referrals');

// REFERRAL COPY
function copyReferral(){
  const link = `${window.location.origin}${window.location.pathname}?ref=${user.id}`;
  navigator.clipboard.writeText(link);
  alert('Referral link copied!');
}

// WITHDRAW REQUEST
function withdrawRequest(method){
  const balance = parseInt(localStorage.getItem('income'));
  if(balance<=0){ alert('Insufficient balance'); return; }
  // Mock request to Admin Bot
  alert(`Withdraw request sent via ${method}.`);
  localStorage.setItem('income', 0);
  updateStats();
  document.getElementById('profileBalance').innerText = localStorage.getItem('income');
}

// REFERRAL LOGIC
const urlParams = new URLSearchParams(window.location.search);
const refId = urlParams.get('ref');
if(refId && refId != user.id){
  // Increment referral count
  localStorage.setItem('referrals', parseInt(localStorage.getItem('referrals')) + 1);
  updateStats();
  // Send Telegram notification to Admin (pseudo)
  console.log(`Referral by ${refId} -> ${user.id}`);
}

</script>
<!-- পার্ট টু শেষ --><!-- পার্ট ওয়ান শুরু -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TapCash Mini App</title>
<style>
  body { margin:0; padding:0; font-family:sans-serif; background:#fff; color:#000; }
  .screen { display:none; padding:20px; height:calc(100vh - 60px); box-sizing:border-box; }
  .screen.active { display:block; }
  .bottom-nav { position:fixed; bottom:0; left:0; width:100%; height:60px; display:flex; border-top:1px solid #ccc; background:#f9f9f9; }
  .bottom-nav button { flex:1; border:none; background:#eee; font-size:16px; cursor:pointer; }
  .bottom-nav button.active { background:#ddd; }
  .profile-img { width:50px; height:50px; border-radius:50%; margin-right:10px; }
  .user-info { display:flex; align-items:center; margin-bottom:20px; }
  .btn { padding:10px 20px; margin:5px 0; display:block; width:100%; font-size:16px; cursor:pointer; }
  .card { padding:15px; border:1px solid #ccc; margin-bottom:10px; border-radius:8px; }
</style>
</head>
<body>

<!-- Home Screen -->
<div id="homeScreen" class="screen active">
  <div class="user-info">
    <img id="profilePic" class="profile-img" src="" alt="Profile">
    <div>
      <div id="userName">User Name</div>
      <div id="welcomeText">Welcome!</div>
    </div>
  </div>
  <div class="card">
    <p>Income: <span id="income">0</span> ৳</p>
    <p>Ads Watched: <span id="adsWatched">0</span></p>
    <p>Referrals: <span id="referrals">0</span></p>
  </div>
</div>

<!-- Earn Screen -->
<div id="earnScreen" class="screen">
  <div class="card">
    <p>Earn Rewards</p>
    <p>Today's Limit: <span id="dailyLimit">5</span> ads</p>
    <p>Ads Watched Today: <span id="adsToday">0</span></p>
    <p>Per Ad Reward: 1 ৳</p>
    <button id="watchAdBtn" class="btn">Watch Ad</button>
  </div>
  <div class="card">
    <p>Join on Telegram:</p>
    <button class="btn" onclick="joinTelegram('channel1')">Join Channel 1</button>
    <button class="btn" onclick="joinTelegram('channel2')">Join Channel 2</button>
    <button class="btn" onclick="joinTelegram('channel3')">Join Channel 3</button>
  </div>
  <div id="monetagSpot">
    <!-- Monetag Script -->
    <script src='//libtl.com/sdk.js' data-zone='9717419' data-sdk='show_9717419'></script>
  </div>
</div>

<script>
// CONFIGURATION
const CONFIG = {
  BOT_TOKEN: '7567052001:AAHrSf6mQPzIsI-_h-zHbYPPaoxO1OMZSH0',
  ADMIN_CHAT_ID: '6750565670',
  BOT_USERNAME: 'MonetagMiniBot_bot',
  MONETAG_SDK_FUNC: 'show_9717419',
  DAILY_AD_LIMIT: 5,
  AD_REWARD: 1
};

// LOCAL STORAGE INIT
if(!localStorage.getItem('income')) localStorage.setItem('income', '0');
if(!localStorage.getItem('adsWatched')) localStorage.setItem('adsWatched', '0');
if(!localStorage.getItem('referrals')) localStorage.setItem('referrals', '0');
if(!localStorage.getItem('adsToday')) localStorage.setItem('adsToday', '0');

// DOM ELEMENTS
const homeScreen = document.getElementById('homeScreen');
const earnScreen = document.getElementById('earnScreen');
const profilePic = document.getElementById('profilePic');
const userName = document.getElementById('userName');
const incomeEl = document.getElementById('income');
const adsWatchedEl = document.getElementById('adsWatched');
const referralsEl = document.getElementById('referrals');
const adsTodayEl = document.getElementById('adsToday');
const watchAdBtn = document.getElementById('watchAdBtn');

// USER INFO MOCK (Telegram WebApp)
let user = {
  id: 123456,
  username: 'username_here',
  first_name: 'First',
  last_name: 'Last',
  profile_photo: ''
};

// SET USER INFO
profilePic.src = user.profile_photo || 'https://via.placeholder.com/50';
userName.innerText = user.first_name + ' ' + (user.last_name || '');

// UPDATE FUNCTION
function updateStats() {
  incomeEl.innerText = localStorage.getItem('income');
  adsWatchedEl.innerText = localStorage.getItem('adsWatched');
  referralsEl.innerText = localStorage.getItem('referrals');
  adsTodayEl.innerText = localStorage.getItem('adsToday');
}

updateStats();

// WATCH AD FUNCTION
watchAdBtn.onclick = function() {
  let adsToday = parseInt(localStorage.getItem('adsToday'));
  if(adsToday >= CONFIG.DAILY_AD_LIMIT) {
    alert('Daily limit reached!');
    return;
  }
  watchAdBtn.disabled = true;
  watchAdBtn.innerText = 'Watching... 15s';
  let seconds = 15;
  let interval = setInterval(()=>{
    seconds--;
    watchAdBtn.innerText = `Watching... ${seconds}s`;
    if(seconds<=0){
      clearInterval(interval);
      watchAdBtn.disabled = false;
      watchAdBtn.innerText = 'Watch Ad';
      // Reward user
      let income = parseInt(localStorage.getItem('income')) + CONFIG.AD_REWARD;
      localStorage.setItem('income', income);
      localStorage.setItem('adsWatched', parseInt(localStorage.getItem('adsWatched'))+1);
      localStorage.setItem('adsToday', adsToday+1);
      updateStats();
      // Call Monetag SDK
      if(window[CONFIG.MONETAG_SDK_FUNC]) window[CONFIG.MONETAG_SDK_FUNC]();
    }
  },1000);
}

// JOIN TELEGRAM (mock)
function joinTelegram(channel){
  alert(`Joined ${channel}, reward credited!`);
}
</script>

<div class="bottom-nav">
  <button id="navHome" class="active">Home</button>
  <button id="navEarn">Earn</button>
  <button id="navWithdraw">Withdraw</button>
  <button id="navProfile">Profile</button>
</div>

<script>
// BOTTOM NAV
const navHome = document.getElementById('navHome');
const navEarn = document.getElementById('navEarn');
const navWithdraw = document.getElementById('navWithdraw');
const navProfile = document.getElementById('navProfile');
const screens = [homeScreen, earnScreen]; // Withdraw & Profile added in Part 2

function switchScreen(screen){
  screens.forEach(s=>s.classList.remove('active'));
  screen.classList.add('active');
  document.querySelectorAll('.bottom-nav button').forEach(b=>b.classList.remove('active'));
}

navHome.onclick = ()=>switchScreen(homeScreen);
navEarn.onclick = ()=>switchScreen(earnScreen);
</script>
</html>
<!-- পার্ট ওয়ান শেষ -->
