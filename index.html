<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>TapCash Mini App Clone</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,sans-serif}
  body{background:#fff;color:#000;display:flex;flex-direction:column;min-height:100vh}
  .flash{position:fixed;top:0;left:0;right:0;bottom:0;background:#fff;display:none;align-items:center;justify-content:center;z-index:999;font-weight:700;font-size:22px;color:#000}
  header{display:flex;align-items:center;padding:12px 16px;border-bottom:1px solid #eee}
  .avatar{width:56px;height:56px;border-radius:50%;background:#0b74ff;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:22px;margin-right:12px}
  .userinfo small{color:#555;display:block}
  main{padding:12px;flex:1;overflow:auto}
  .card{background:#f9f9f9;border-radius:12px;padding:12px;margin-bottom:12px;box-shadow:0 1px 3px rgba(0,0,0,0.05)}
  .summary{display:flex;gap:10px;margin-top:8px}
  .summary .item{flex:1;background:#eef3ff;text-align:center;padding:12px;border-radius:10px}
  .amount{font-weight:800;font-size:18px}
  .page{display:none}
  .page.active{display:block}
  .ads-list{display:flex;flex-direction:column;gap:10px;margin-top:8px}
  .ad-card{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;border:1px solid #ddd;background:#fff}
  .btn{padding:8px 12px;border-radius:8px;border:0;background:#0b74ff;color:#fff;font-weight:700;cursor:pointer}
  .join-row{display:flex;gap:8px;margin-top:8px}
  .join-row .btn{flex:1}
  input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-top:10px}
  .ref-box{display:flex;gap:8px;align-items:center}
  .copy-btn{padding:8px;border-radius:8px;border:0;background:#111827;color:#fff;cursor:pointer}
  .nav{position:fixed;left:12px;right:12px;bottom:12px;height:60px;background:#fff;border-radius:14px;display:flex;align-items:center;justify-content:space-around;box-shadow:0 8px 30px rgba(0,0,0,0.1)}
  .nav button{flex:1;margin:0 8px;padding:10px;border-radius:10px;border:0;color:#fff;background:#0b74ff;font-weight:700;cursor:pointer}
</style>
</head>
<body>

<div id="flash" class="flash">Loading...</div>

<header>
  <div id="avatarEl" class="avatar">?</div>
  <div class="userinfo">
    <small id="tgHandle">@josimm123</small>
    <div id="displayName">জসিম</div>
  </div>
</header>

<main>
  <!-- Home -->
  <section id="homePage" class="page active card">
    <h2>Welcome <span id="welcomeName">জসিম</span></h2>
    <div class="summary">
      <div class="item"><div>টাকা</div><div id="balanceAmount" class="amount">0৳</div></div>
      <div class="item"><div>দেখা এড</div><div id="adsCount" class="amount">0</div></div>
      <div class="item"><div>রেফার</div><div id="refCount" class="amount">0</div></div>
    </div>
  </section>

  <!-- Earn -->
  <section id="earnPage" class="page card">
    <h2>Earn Rewards</h2>
    <div id="monetagContainer">
      <script src='//libtl.com/sdk.js' data-zone='9717419' data-sdk='show_9717419'></script>
    </div>
    <div class="ads-list" id="adsList"></div>
    <div class="card">
      <h4>Join Telegram</h4>
      <div class="join-row">
        <button id="joinBtn1" class="btn">Join 1</button>
        <button id="joinBtn2" class="btn">Join 2</button>
        <button id="joinBtn3" class="btn">Join 3</button>
      </div>
    </div>
  </section>

  <!-- Withdraw -->
  <section id="withdrawPage" class="page card">
    <h2>Withdraw</h2>
    <div>Balance: <span id="withdrawBalance">0৳</span></div>
    <select id="payMethod">
      <option value="">Select Method</option>
      <option value="bkash">bKash</option>
      <option value="nagad">Nagad</option>
      <option value="rocket">Rocket</option>
      <option value="bank">Bank Transfer</option>
    </select>
    <div id="methodFields"></div>
    <input id="withdrawAmount" type="number" placeholder="Amount ৳">
    <button id="requestWithdraw" class="btn">Request Withdraw</button>
  </section>

  <!-- Profile -->
  <section id="profilePage" class="page card">
    <h2>Profile</h2>
    <div style="display:flex;gap:12px;align-items:center">
      <div id="profileAvatar" class="avatar">J</div>
      <div>
        <div id="profileName">জসিম</div>
        <div id="profileUsername">@josimm123</div>
      </div>
    </div>
    <div class="summary" style="margin-top:12px">
      <div class="item">Balance: <span id="profileBalance">0৳</span></div>
      <div class="item">Ads: <span id="profileAds">0</span></div>
      <div class="item">Referrals: <span id="profileRef">0</span></div>
    </div>
    <div class="card" style="margin-top:12px">
      <h4>Referral Link</h4>
      <div class="ref-box">
        <input id="refLink" readonly value="https://yourapp.com?ref=123" />
        <button id="copyRef" class="copy-btn">Copy</button>
      </div>
    </div>
  </section>
</main>

<nav class="nav">
  <button id="navHome">Home</button>
  <button id="navEarn">Earn</button>
  <button id="navWithdraw">Withdraw</button>
  <button id="navProfile">Profile</button>
</nav>

<script>
let user = {
  balance:0,
  adsWatched:0,
  referrals:0
};
function showFlash(msg='Loading...'){ const f=document.getElementById('flash'); f.innerText=msg; f.style.display='flex'; }
function hideFlash(){ document.getElementById('flash').style.display='none'; }
function goto(id){ showFlash(); setTimeout(()=>{ document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); document.getElementById(id).classList.add('active'); hideFlash(); },200); }

document.getElementById('navHome').addEventListener('click',()=>goto('homePage'));
document.getElementById('navEarn').addEventListener('click',()=>goto('earnPage'));
document.getElementById('navWithdraw').addEventListener('click',()=>goto('withdrawPage'));
document.getElementById('navProfile').addEventListener('click',()=>goto('profilePage'));

// Ads simulation
const adsList = document.getElementById('adsList');
for(let i=1;i<=3;i++){
  const d = document.createElement('div');
  d.className='ad-card';
  d.innerHTML=`<div>Ad #${i} - Earn 1৳</div><button class="btn">Watch</button>`;
  adsList.appendChild(d);
  d.querySelector('button').addEventListener('click',()=>{
    user.balance += 1; user.adsWatched +=1; updateSummary(); alert('Ad watched +1৳ earned');
  });
}

// Join buttons
document.getElementById('joinBtn1').addEventListener('click',()=>{ user.balance+=1; updateSummary(); window.open('https://t.me/MonetagMiniBot_bot','_blank'); });
document.getElementById('joinBtn2').addEventListener('click',()=>{ user.balance+=1; updateSummary(); window.open('https://t.me/MonetagMiniBot_bot','_blank'); });
document.getElementById('joinBtn3').addEventListener('click',()=>{ user.balance+=1; updateSummary(); window.open('https://t.me/MonetagMiniBot_bot','_blank'); });

// Withdraw logic
document.getElementById('payMethod').addEventListener('change',function(){
  const val=this.value;
  const container=document.getElementById('methodFields');
  container.innerHTML='';
  if(val==='bkash' || val==='nagad' || val==='rocket'){
    container.innerHTML=`<input id="payNumber" placeholder="Number">`;
  } else if(val==='bank'){
    container.innerHTML=`<input id="bankName" placeholder="Bank Name"><input id="bankAcc" placeholder="Account Number">`;
  }
});
document.getElementById('requestWithdraw').addEventListener('click',()=>{
  const amt=parseFloat(document.getElementById('withdrawAmount').value);
  if(isNaN(amt)||amt<=0){alert('Enter valid amount');return;}
  if(amt>user.balance){alert('Not enough balance');return;}
  user.balance-=amt; updateSummary(); alert('Withdraw request sent to admin');
});

// Referral copy
document.getElementById('copyRef').addEventListener('click',()=>{
  const refInput=document.getElementById('refLink');
  refInput.select(); refInput.setSelectionRange(0,99999); navigator.clipboard.writeText(refInput.value);
  alert('Referral link copied');
});

// Update summary
function updateSummary(){
  document.getElementById('balanceAmount').innerText=user.balance+'৳';
  document.getElementById('adsCount').innerText=user.adsWatched;
  document.getElementById('refCount').innerText=user.referrals;
  document.getElementById('profileBalance').innerText=user.balance+'৳';
  document.getElementById('profileAds').innerText=user.adsWatched;
  document.getElementById('profileRef').innerText=user.referrals;
}

// Referral simulation
function checkReferral(startParam){
  if(startParam){ user.referrals+=1; updateSummary(); }
}
// Example: on app load parse ?ref=123 from URL
const urlParams = new URLSearchParams(window.location.search);
checkReferral(urlParams.get('ref'));
</script>

</body>
</html>
