<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Mini App</title>
  <style>
    body {
      margin:0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #fff;
    }
    .header {
      display:flex;
      align-items:center;
      padding:10px;
      background-color:#1f1f1f;
    }
    .profile-pic {
      width:50px;
      height:50px;
      border-radius:50%;
      margin-right:10px;
    }
    .content {
      padding:10px;
      min-height:70vh;
    }
    .card {
      background-color:#1f1f1f;
      padding:15px;
      margin-bottom:10px;
      border-radius:10px;
    }
    .buttons {
      position:fixed;
      bottom:0;
      width:100%;
      display:flex;
      background-color:#1a1a1a;
    }
    .buttons button {
      flex:1;
      padding:15px;
      border:none;
      background-color:#333;
      color:#fff;
      font-size:16px;
      cursor:pointer;
    }
    .buttons button.active {
      background-color:#007bff;
    }
    .ad-card {
      background-color:#292929;
      padding:10px;
      margin:5px 0;
      border-radius:5px;
      text-align:center;
      cursor:pointer;
    }
    .join-buttons button {
      margin:5px 0;
      width:100%;
      padding:10px;
      background-color:#444;
      border:none;
      border-radius:5px;
      cursor:pointer;
      color:#fff;
    }
    .withdraw-form {
      display:flex;
      flex-direction:column;
      margin-top:10px;
    }
    .withdraw-form input, .withdraw-form select {
      margin-bottom:10px;
      padding:8px;
      border-radius:5px;
      border:none;
    }
    .copy-link {
      background-color:#007bff;
      padding:8px;
      border:none;
      border-radius:5px;
      color:#fff;
      cursor:pointer;
    }
  </style>
</head>
<body>

  <!-- Header with Profile -->
  <div class="header" id="header">
    <img src="" alt="Profile" class="profile-pic" id="profilePic">
    <div>
      <div id="userName">User Name</div>
      <div id="welcomeMessage">Welcome!</div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="content" id="mainContent">
    <!-- Content will change according to button -->
  </div>

  <!-- Bottom Buttons -->
  <div class="buttons">
    <button id="homeBtn" class="active">Home</button>
    <button id="earnBtn">Earn</button>
    <button id="withdrawBtn">Withdraw</button>
    <button id="profileBtn">Profile</button>
  </div>

<script>
  // ==== Telegram Bot Config ====
  const BOT_TOKEN = "YOUR_TELEGRAM_BOT_TOKEN"; // এখানে আপনার বট টোকেন দিন
  const ADMIN_ID = "YOUR_ADMIN_TELEGRAM_ID"; // এখানে এডমিন আইডি দিন

  // ==== Dummy User Data ====
  let user = {
    telegramId: "123456789",
    name: "Zihad Sheikh",
    username: "@zihad",
    profilePic: "https://via.placeholder.com/50",
    earnings: 0,
    adsWatched: 0,
    referrals: 0,
    referLink: "https://t.me/your_bot?start=123456789"
  };

  // ==== Initialize ====
  const mainContent = document.getElementById('mainContent');
  const profilePic = document.getElementById('profilePic');
  const userName = document.getElementById('userName');
  const welcomeMessage = document.getElementById('welcomeMessage');

  profilePic.src = user.profilePic;
  userName.textContent = user.name;
  welcomeMessage.textContent = `Welcome, ${user.name}!`;

  // ==== Buttons ====
  const homeBtn = document.getElementById('homeBtn');
  const earnBtn = document.getElementById('earnBtn');
  const withdrawBtn = document.getElementById('withdrawBtn');
  const profileBtn = document.getElementById('profileBtn');

  function setActive(button) {
    document.querySelectorAll('.buttons button').forEach(btn=>btn.classList.remove('active'));
    button.classList.add('active');
  }

  // ==== Render Sections ====
  function renderHome() {
    setActive(homeBtn);
    mainContent.innerHTML = `
      <div class="card">Income: $${user.earnings}</div>
      <div class="card">Ads Watched: ${user.adsWatched}</div>
      <div class="card">Referrals: ${user.referrals}</div>
    `;
  }

  function renderEarn() {
    setActive(earnBtn);
    mainContent.innerHTML = `
      <div class="card">Earn Rewards</div>
      <div>Ads watched today: ${user.adsWatched}</div>
      <div>Max Ads per day: 5</div>
      <div class="ad-card" onclick="watchAd()">Watch Ad +$0.10</div>
      <div class="join-buttons">
        <button onclick="joinTelegram('channel1')">Join Telegram Channel 1</button>
        <button onclick="joinTelegram('channel2')">Join Telegram Channel 2</button>
        <button onclick="joinTelegram('channel3')">Join Telegram Channel 3</button>
      </div>
    `;
  }

  function watchAd() {
    if(user.adsWatched >= 5){
      alert("You reached maximum ads for today!");
      return;
    }
    user.adsWatched += 1;
    user.earnings += 0.10; // Monetag ad earning
    renderEarn();
  }

  function joinTelegram(channel){
    alert(`Joined ${channel}, reward added!`);
    user.earnings += 0.50; // Joining reward
    renderEarn();
  }

  function renderWithdraw() {
    setActive(withdrawBtn);
    mainContent.innerHTML = `
      <div class="card">Your Balance: $${user.earnings.toFixed(2)}</div>
      <button onclick="showWithdrawForm()">Withdraw</button>
      <div id="withdrawFormContainer"></div>
    `;
  }

  function showWithdrawForm() {
    const container = document.getElementById('withdrawFormContainer');
    container.innerHTML = `
      <form class="withdraw-form" onsubmit="requestWithdraw(event)">
        <select required id="paymentMethod">
          <option value="">Select Payment Method</option>
          <option value="paypal">PayPal</option>
          <option value="bank">Bank Transfer</option>
        </select>
        <input type="text" id="paymentDetails" placeholder="Enter account/email" required>
        <input type="number" id="withdrawAmount" placeholder="Amount" max="${user.earnings.toFixed(2)}" required>
        <input type="file" id="withdrawScreenshot" required>
        <button type="submit">Submit Withdraw</button>
      </form>
    `;
  }

  function requestWithdraw(e){
    e.preventDefault();
    const method = document.getElementById('paymentMethod').value;
    const details = document.getElementById('paymentDetails').value;
    const amount = parseFloat(document.getElementById('withdrawAmount').value);
    const screenshot = document.getElementById('withdrawScreenshot').files[0];

    if(amount > user.earnings){
      alert("Not enough balance");
      return;
    }

    // TODO: Send request to admin via Telegram Bot with screenshot
    alert(`Withdraw request sent for $${amount} via ${method}`);
    user.earnings -= amount;
    renderWithdraw();
  }

  function renderProfile() {
    setActive(profileBtn);
    mainContent.innerHTML = `
      <div class="card">
        <img src="${user.profilePic}" alt="Profile" style="width:50px;border-radius:50%">
        <div>Name: ${user.name}</div>
        <div>Username: ${user.username}</div>
      </div>
      <div class="card">Balance: $${user.earnings.toFixed(2)}</div>
      <div class="card">Ads Watched: ${user.adsWatched}</div>
      <div class="card">Referrals: ${user.referrals}</div>
      <div class="card">
        <input type="text" value="${user.referLink}" readonly id="refLink">
        <button class="copy-link" onclick="copyReferral()">Copy Link</button>
      </div>
    `;
  }

  function copyReferral() {
    const copyText = document.getElementById('refLink');
    copyText.select();
    copyText.setSelectionRange(0, 99999);
    document.execCommand("copy");
    alert("Referral link copied!");
  }

  // ==== Button Event Listeners ====
  homeBtn.addEventListener('click', renderHome);
  earnBtn.addEventListener('click', renderEarn);
  withdrawBtn.addEventListener('click', renderWithdraw);
  profileBtn.addEventListener('click', renderProfile);

  // Initial load
  renderHome();

</script>
</body>
  </html>
